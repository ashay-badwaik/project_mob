var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _client=require("@apollo/client");var _reactNative=require("react-native");var _asyncStorage=_interopRequireDefault(require("@react-native-async-storage/async-storage"));var _reactNativeSvg=_interopRequireWildcard(require("react-native-svg"));var _homeScreen=require("./styles/homeScreen");var _query=require("../graphql/query");var _native=require("@react-navigation/native");var _maskedView=_interopRequireDefault(require("@react-native-masked-view/masked-view"));var _this=this,_jsxFileName="/Users/ashay/Documents/project_mob/story/components/homeScreen.js";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var HomeScreen=function HomeScreen(_ref){var _route$params,_route$params2;var navigation=_ref.navigation,route=_ref.route;var _useQuery=(0,_client.useQuery)(_query.USER_DETAILS,{variables:{id:1}}),loading=_useQuery.loading,error=_useQuery.error,data=_useQuery.data;var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2.default)(_useState,2),uploaded=_useState2[0],setUploaded=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=(0,_slicedToArray2.default)(_useState3,2),viewed=_useState4[0],setViewed=_useState4[1];var _useState5=(0,_react.useState)(""),_useState6=(0,_slicedToArray2.default)(_useState5,2),path=_useState6[0],setPath=_useState6[1];(0,_react.useEffect)(function(){if(data){setPath(data.getUserDetails.image_path);}},[loading,error,data]);(0,_react.useEffect)(function _callee(){return _regenerator.default.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator.default.awrap(_asyncStorage.default.getItem('stories').then(function(value){if(value!=null){setUploaded(true);value=JSON.parse(value);setViewed(value.viewed);}}).catch(function(err){console.log('homeScreen',err);}));case 2:case"end":return _context.stop();}}},null,null,null,Promise);},[uploaded,viewed,(_route$params=route.params)==null?void 0:_route$params.available,(_route$params2=route.params)==null?void 0:_route$params2.viewed]);var decagon=function decagon(){if(uploaded===true&&viewed===false){return"#fdbb21";}else if(uploaded===true&&viewed===true){return"#cccccc";}return"transparent";};var nameDisplay=function nameDisplay(){if(loading){return"loading";}if(error){console.log('erroe:',error);return"Error";}return data.getUserDetails.name;};var bioDisplay=function bioDisplay(){if(loading){return"loading";}if(error){console.log('erroe:',error);return"Error";}return data.getUserDetails.bio;};var imageDisplay=function imageDisplay(){if(loading){return _react.default.createElement(_reactNative.Image,{source:require('./../images/no_profile_pic.jpeg'),style:_homeScreen.styles.image,__self:_this,__source:{fileName:_jsxFileName,lineNumber:127,columnNumber:21}});}if(error){console.log(error);return _react.default.createElement(_reactNative.Image,{source:require('./../images/no_profile_pic.jpeg'),style:_homeScreen.styles.image,__self:_this,__source:{fileName:_jsxFileName,lineNumber:131,columnNumber:21}});}return _react.default.createElement(_reactNative.Image,{source:{uri:path},style:_homeScreen.styles.image,__self:_this,__source:{fileName:_jsxFileName,lineNumber:135,columnNumber:17}});};return _react.default.createElement(_reactNative.SafeAreaView,{style:_homeScreen.styles.container,__self:_this,__source:{fileName:_jsxFileName,lineNumber:139,columnNumber:9}},_react.default.createElement(_reactNative.View,{style:_homeScreen.styles.header,__self:_this,__source:{fileName:_jsxFileName,lineNumber:141,columnNumber:13}}),_react.default.createElement(_reactNative.View,{style:_homeScreen.styles.imageBox,__self:_this,__source:{fileName:_jsxFileName,lineNumber:145,columnNumber:13}},_react.default.createElement(_reactNativeSvg.default,{viewBox:"-800 -800 1600 1600",height:"400",width:"400",style:_homeScreen.styles.shape,__self:_this,__source:{fileName:_jsxFileName,lineNumber:147,columnNumber:17}},_react.default.createElement(_reactNativeSvg.Path,{fill:"none",stroke:decagon(),strokeWidth:"30",d:"m754,0 L610,443.19 L233,717.1 L-233,717.1       -610,443.19 -754,0 -610,-443.19       -233,-717.1 233,-717.1       610,-443.19       z",__self:_this,__source:{fileName:_jsxFileName,lineNumber:148,columnNumber:21}})),_react.default.createElement(_maskedView.default,{maskElement:_react.default.createElement(_reactNativeSvg.default,{width:"300",height:"300",viewBox:"0 0 300 280",__self:_this,__source:{fileName:_jsxFileName,lineNumber:159,columnNumber:25}},_react.default.createElement(_reactNativeSvg.G,{transform:"translate(0.000000,280.000000) scale(0.100000,-0.100000)",fill:"#1A5F04",stroke:"none",__self:_this,__source:{fileName:_jsxFileName,lineNumber:160,columnNumber:29}},_react.default.createElement(_reactNativeSvg.Path,{d:"M1011 2703 c-94 -68 -255 -185 -318 -232 -85 -63 -195 -143 -270 -196 l-61 -44 -52 -163 c-29 -90 -60 -185 -71 -212 -10 -27 -19 -55 -19 -62 0 -8 -4 -22 -9 -32 -5 -9 -34 -94 -64 -189 l-54 -172 54 -168 c30 -92 58 -177 62 -188 5 -11 22 -63 39 -115 111 -353 115 -361 141 -378 14 -9 56 -39 93 -67 37 -27 95 -70 129 -95 35 -25 85 -61 111 -80 26 -19 81 -59 120 -88 40 -28 107 -77 148 -107 l75 -55 436 0 435 0 55 40 c30 21 69 49 87 62 18 13 54 39 80 58 26 20 79 58 117 85 39 27 75 54 81 60 6 5 46 35 88 65 43 30 105 75 138 100 68 51 43 -8 207 500 46 140 92 281 102 312 20 58 20 58 1 115 -11 32 -41 126 -67 208 -26 83 -51 159 -55 170 -5 11 -35 103 -67 205 l-59 185 -50 38 c-27 21 -83 62 -124 92 -41 30 -133 98 -205 150 -131 97 -146 108 -265 190 l-65 45 -436 0 -436 0 -52 -37z",strokeWidth:"20",__self:_this,__source:{fileName:_jsxFileName,lineNumber:165,columnNumber:33}})),_react.default.createElement(_reactNativeSvg.G,{transform:"translate(0.000000,280.000000) scale(0.100000,-0.100000)",fill:"#FFFFFF",stroke:"none",__self:_this,__source:{fileName:_jsxFileName,lineNumber:177,columnNumber:29}})),__self:_this,__source:{fileName:_jsxFileName,lineNumber:157,columnNumber:17}},_react.default.createElement(_reactNative.TouchableOpacity,{style:_homeScreen.styles.stories,onPress:function onPress(){return navigation.navigate("Story");},onLongPress:function onLongPress(){return navigation.navigate({name:"ChangeProfilePic",params:{imagePath:path}});},testID:"image",__self:_this,__source:{fileName:_jsxFileName,lineNumber:185,columnNumber:21}},imageDisplay())),_react.default.createElement(_reactNative.View,{style:{position:"absolute"},__self:_this,__source:{fileName:_jsxFileName,lineNumber:195,columnNumber:17}},_react.default.createElement(_reactNative.TouchableOpacity,{style:_homeScreen.styles.addBtn,onPress:function onPress(){return navigation.navigate({name:"AddStory",params:{storiesAvailable:uploaded}});},testID:"addBtn",__self:_this,__source:{fileName:_jsxFileName,lineNumber:196,columnNumber:21}},_react.default.createElement(_reactNative.Text,{style:_homeScreen.styles.btnText,__self:_this,__source:{fileName:_jsxFileName,lineNumber:201,columnNumber:25}},"+")))),_react.default.createElement(_reactNative.View,{style:_homeScreen.styles.info,__self:_this,__source:{fileName:_jsxFileName,lineNumber:207,columnNumber:13}},_react.default.createElement(_reactNative.Text,{testID:"nameDisplay",style:_homeScreen.styles.name,__self:_this,__source:{fileName:_jsxFileName,lineNumber:208,columnNumber:17}},nameDisplay()),_react.default.createElement(_reactNative.Text,{testID:"bioDisplay",style:_homeScreen.styles.bio,__self:_this,__source:{fileName:_jsxFileName,lineNumber:209,columnNumber:17}},bioDisplay())));};var _default=HomeScreen;exports.default=_default;