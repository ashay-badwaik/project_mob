var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeImageCropPicker=_interopRequireDefault(require("react-native-image-crop-picker"));var _client=require("@apollo/client");var _mutation=require("./../graphql/mutation");var _ChnageProfilePic=require("./styles/ChnageProfilePic");var _this=this,_jsxFileName="/Users/ashay/Documents/project_mob/story/components/changeProfilePic.js";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var ChangeProfilePic=function ChangeProfilePic(_ref){var route=_ref.route,navigation=_ref.navigation;var imagePath=route.params.imagePath;var id=_reactNative.Platform.OS==='android'?1:2;var _useState=(0,_react.useState)(imagePath),_useState2=(0,_slicedToArray2.default)(_useState,2),path=_useState2[0],setPath=_useState2[1];var _useMutation=(0,_client.useMutation)(_mutation.UPLOAD_IMAGE_PATH),_useMutation2=(0,_slicedToArray2.default)(_useMutation,2),uploadPath=_useMutation2[0],_useMutation2$=_useMutation2[1],data=_useMutation2$.data,loading=_useMutation2$.loading,error=_useMutation2$.error;var imageDisplay=function imageDisplay(){if(path===""){return _react.default.createElement(_reactNative.Image,{style:[_ChnageProfilePic.styles.img,{aspectRatio:1}],source:require('./../images/no_profile_pic.jpeg'),testID:"none",__self:_this,__source:{fileName:_jsxFileName,lineNumber:31,columnNumber:17}});}return _react.default.createElement(_reactNative.Image,{style:_ChnageProfilePic.styles.img,source:{uri:path},testID:"picture",__self:_this,__source:{fileName:_jsxFileName,lineNumber:40,columnNumber:13}});};var pickImageGallery=function pickImageGallery(){_reactNativeImageCropPicker.default.openPicker({cropping:true,width:300,height:300}).then(function(image){setPath(image.path);}).catch(function(err){console.log(err);});};var clickImage=function clickImage(){_reactNativeImageCropPicker.default.openCamera({cropping:true,width:300,height:300,mediaType:'photo'}).then(function(image){setPath(image.path);}).catch(function(err){console.log(err);});};var upload=function upload(){uploadPath({variables:{id:id,path:path}});navigation.navigate({name:'Home',params:{path:path}});};return _react.default.createElement(_reactNative.View,{style:_ChnageProfilePic.styles.container,__self:_this,__source:{fileName:_jsxFileName,lineNumber:78,columnNumber:9}},_react.default.createElement(_reactNative.Text,{style:_ChnageProfilePic.styles.header,__self:_this,__source:{fileName:_jsxFileName,lineNumber:80,columnNumber:13}},"Set Profile Pic"),_react.default.createElement(_reactNative.View,{testID:"image",style:_ChnageProfilePic.styles.imgBox,__self:_this,__source:{fileName:_jsxFileName,lineNumber:82,columnNumber:13}},imageDisplay()),_react.default.createElement(_reactNative.TouchableOpacity,{style:_ChnageProfilePic.styles.btn,onPress:pickImageGallery,testID:"gallery",__self:_this,__source:{fileName:_jsxFileName,lineNumber:86,columnNumber:13}},_react.default.createElement(_reactNative.Text,{style:_ChnageProfilePic.styles.btnText,__self:_this,__source:{fileName:_jsxFileName,lineNumber:91,columnNumber:17}},"Pick from Gallery")),_react.default.createElement(_reactNative.TouchableOpacity,{style:_ChnageProfilePic.styles.btn,onPress:clickImage,testID:"camera",__self:_this,__source:{fileName:_jsxFileName,lineNumber:94,columnNumber:13}},_react.default.createElement(_reactNative.Text,{style:_ChnageProfilePic.styles.btnText,__self:_this,__source:{fileName:_jsxFileName,lineNumber:99,columnNumber:17}},"Take a photo")),_react.default.createElement(_reactNative.TouchableOpacity,{style:_ChnageProfilePic.styles.btn,onPress:upload,testID:"upload",__self:_this,__source:{fileName:_jsxFileName,lineNumber:102,columnNumber:13}},_react.default.createElement(_reactNative.Text,{style:_ChnageProfilePic.styles.btnText,__self:_this,__source:{fileName:_jsxFileName,lineNumber:107,columnNumber:17}},"Upload")));};var _default=ChangeProfilePic;exports.default=_default;